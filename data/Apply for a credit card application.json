{"created_by": "edison.chu@dyna.ai", "modified_by": "edison.chu@dyna.ai", "flow_uuid": "67cda3f4-1e7c-11f0-b399-4ef3e279a175", "start_node_uuid": "start00000000000000000000", "flow_name": "Apply for a credit card application", "description": "you name's eva.\nhelp customer to check in the credit card application.", "nodes": [{"id": "start00000000000000000000", "type": "start", "initialized": false, "position": {"x": -278.2294630329306, "y": 260.9115875421261}, "data": {"label": "Start", "showToolBar": false}}, {"id": "0217c035-b45c-4046-8815-264ab8a88e27", "type": "code", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "ab76726e-db57-4896-adb2-5cec01bb1781", "showToolBar": false}, "blockId": "6cf10513-60ae-40d4-ba6f-51d82e28ab49", "hidden": true, "config": {"title": "Node3", "desc": "", "code": "\ndef main() -> dict:\n  all_info = {\n    \"whether_travel\": \"null\",\n    \"whether_former_credit_card\": \"null\",\n    \"whether_increase_credit_limit\": \"null\",\n    \"whether_give_extra_request\": \"null\",\n    \"response\": \"null\"\n  }\n\n  return {\n    \"all_info\": all_info\n}\n", "code_language": "python3", "outputs": [{"name": "all_info", "type": "string", "variable_assign": "all_info"}], "args": []}}, {"id": "6cf10513-60ae-40d4-ba6f-51d82e28ab49", "type": "block", "initialized": false, "position": {"x": 328.9179273028583, "y": 234.66666666666663}, "data": {"label": "Node3", "include_node_ids": ["0217c035-b45c-4046-8815-264ab8a88e27"], "showToolBar": false}}, {"id": "cad7b46e-3cc9-4ae7-9455-21d33621da95", "type": "condition", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "8d224ca2-6eed-450c-941e-93c5fa458c04", "showToolBar": false}, "blockId": "277c1b81-13c9-4c35-a78d-ec2f0be1f303", "hidden": true, "config": {"if_else_conditions": [{"condition_id": "dd4c78a9-8e43-4981-b7ad-2d00e08ffdc7", "condition_name": "没填完表单", "logical_operator": "and", "conditions": [{"condition_type": "variable", "comparison_operator": "=", "condition_value": "0", "condition_variable": "result"}], "condition_action": []}, {"condition_name": "填完表单", "logical_operator": "and", "conditions": [{"condition_type": "variable", "comparison_operator": "=", "condition_value": "1", "condition_variable": "result"}], "condition_action": [], "condition_id": "285e46b2-682a-4caa-8cfa-68c71ed65c1e"}, {"condition_id": "46cbf3c0-aafb-461a-b00d-c8db3666d0e8", "condition_name": "Other", "logical_operator": "other", "conditions": [], "condition_action": []}], "title": "Node4"}}, {"id": "277c1b81-13c9-4c35-a78d-ec2f0be1f303", "type": "block", "initialized": false, "position": {"x": 1909.028650453399, "y": 234.66666666666663}, "data": {"label": "Node4", "include_node_ids": ["cad7b46e-3cc9-4ae7-9455-21d33621da95"], "showToolBar": false}}, {"id": "b3d71a74-55ec-4d46-a2e9-7bc3b71664eb", "type": "textReply", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "0faa4d3b-8d88-4c5f-8978-9f22ecfe1950", "showToolBar": false}, "blockId": "14957a14-c508-4fb4-abb1-9a9b91d98329", "hidden": true, "config": {"async_run": false, "plain_text": [{"text": "​<span class=\"rich-mention__span\" data-id=\"response\" data-name=\"{{response}}\" contenteditable=\"false\" style=\"color: rgb(55, 171, 255); user-select: all;\">{{response}}</span>​", "id": "a3d4cdda-ecc1-40ba-8c33-51c7e493f039"}], "rich_text": [], "title": "Node5"}}, {"id": "14957a14-c508-4fb4-abb1-9a9b91d98329", "type": "block", "initialized": false, "position": {"x": 1306.2504401705924, "y": 645.9118766055059}, "data": {"label": "Node5", "include_node_ids": ["b3d71a74-55ec-4d46-a2e9-7bc3b71664eb"], "showToolBar": false}}, {"id": "a84b9888-dbc1-4e50-82b2-1aef24f4891f", "type": "captureUserReply", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "ce8f1ce9-8494-4b91-9c78-4af43b96614c", "showToolBar": false}, "blockId": "b8d5b4fa-9546-4d2e-be25-874f2d237f48", "hidden": true, "config": {"variable_assign": "last_user_response", "title": "Node6"}}, {"id": "b8d5b4fa-9546-4d2e-be25-874f2d237f48", "type": "block", "initialized": false, "position": {"x": 998.0758647806593, "y": 248.66666666666663}, "data": {"label": "Node6", "include_node_ids": ["a84b9888-dbc1-4e50-82b2-1aef24f4891f"], "showToolBar": false}}, {"id": "fb1611cf-0526-4a16-aa11-6bd2475dd1a9", "type": "llmVariableAssignment", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "b9ee77a4-4420-4aa6-833a-96bc5ac95d09", "showToolBar": false}, "blockId": "c9b42c8e-61a4-4204-803e-8bbf395c5545", "hidden": true, "config": {"title": "Node7", "desc": "", "prompt_template": "用户本次输入：​<span class=\"rich-mention__span\" data-id=\"last_user_response\" data-name=\"{{last_user_response}}\" contenteditable=\"false\" style=\"color: rgb(55, 171, 255); user-select: all;\">{{last_user_response}}</span>\n历史对话就记录：​<span class=\"rich-mention__span\" data-id=\"all_response\" data-name=\"{{all_response}}\" contenteditable=\"false\" style=\"color: rgb(55, 171, 255); user-select: all;\">{{all_response}}</span>​​​\n已有信息：​<span class=\"rich-mention__span\" data-id=\"all_info\" data-name=\"{{all_info}}\" contenteditable=\"false\" style=\"color: rgb(55, 171, 255); user-select: all;\">{{all_info}}</span>\n\n输出：​", "variable_assign": "all_info", "llm_config": {"rag_correlation_threshold": 65, "rag_max_reference_knowledge_num": 3, "divergence": 2, "prompt": "你是一名信用卡申请的客户服务助手。请根据用户的回复提取以下结构化信息，并遵循逻辑要求，要求询问语言为英文：\n字段说明：\n1、whether_travel：用户是否有频繁的商务出行或旅行需求？（yes / no）\n2、whether_former_credit_card：用户是否有计划继续使用之前的信用卡？（yes / no）\n3、whether_increase_credit_limit：用户是否有提额请求？（yes / no）\n4、whether_give_extra_request：如果用户提出了提额请求（即 whether_increase_credit_limit = \"yes\"），是否还能提供额外的需求或理由？（yes / no）\n→ 如果 whether_increase_credit_limit 为 \"no\" 或 \"null\"，则 whether_give_extra_request 必须为 \"null\"\n\n问题提问规则：\n请从\n如果某字段为 \"null\"，则在 response 中提出对应问题；\n请稍微温暖些提出问题。\n\n所有字段填写完成后，response 应为：“感谢您，所有信息已填写完毕。如需修改，请告知。”\n\n输出格式参考如下：\n{ \n\"whether_travel\": \"null\", \n\"whether_former_credit_card\": \"null\", \n\"whether_increase_credit_limit\": \"null\",\n\"whether_give_extra_request\": \"null\", \n\"response\" : \"请问您是否有频繁的商务出行或旅行需求？（是/否）\" \n}\n\n# 注意事项：\n## 不要假设答案，只填写用户明确表达的内容。\n## 如果用户尚未回答某项，仅在 response 字段中提出对应问题。\n## 保证字段间逻辑关系：如未请求提额，则无需提问额外需求（即 whether_give_extra_request 为 \"null\"）。\n\n## 输出内容仅为一个字典{}，不要输出其他内容。\n## 输出response为英文，不需要输出中文\n", "llm_name": "azure-gpt-4o", "rag_question": "", "rag_range": "", "rag_enabled": "", "knowledge_base_ids": [], "knowledge_search_flag": false, "chat_history_flag": false, "chat_history_count": 5, "ltm_enabled": false, "ltm_search_range": "0", "ltm_robot_ids": [], "ltm_question": "", "ltm_recall_count": 5}}}, {"id": "c9b42c8e-61a4-4204-803e-8bbf395c5545", "type": "block", "initialized": false, "position": {"x": 1306.2504401705924, "y": 261.2642062205311}, "data": {"label": "Node7", "include_node_ids": ["fb1611cf-0526-4a16-aa11-6bd2475dd1a9"], "showToolBar": false}}, {"id": "74159968-768f-4de5-8bd5-701ef411a474", "type": "code", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "72ab89fe-82ee-4d5f-90fa-df79136778be", "showToolBar": false}, "blockId": "5f0ec2d3-85b3-40ba-96ee-1f6ea69120bc", "hidden": true, "config": {"title": "Node7", "desc": "", "code": "import re\n\ndef main(all_info: str, last_user_response: str, all_response:str) -> dict:\n    # 解析 json 格式（从字符串中提取字典）\n    all_info = re.findall(r'\\{.*\\}', all_info, re.DOTALL)[0]\n    all_info = eval(all_info)\n\n    # 提取 response\n    response = all_info[\"response\"]\n\n    fields_to_check = {\n        k: v for k, v in all_info.items()\n        if k not in [\"response\", \"whether_give_extra_request\"]\n    }\n    result = \"1\" if all(value != \"null\" for value in fields_to_check.values()) else \"0\"\n\n    # 上下文处理：先尝试 eval，再判断是否为空\n    try:\n        context = eval(all_response)\n        if not isinstance(context, list):  # 安全性判断\n            context = []\n    except:\n        context = []\n\n    context.append([response, last_user_response])\n    context = context[-10:]\n    return {\n        \"response\": response,\n        \"result\": result,\n        \"all_response\": str(context)\n    }\n", "code_language": "python3", "outputs": [{"name": "response", "type": "string", "variable_assign": "response"}, {"name": "result", "type": "string", "variable_assign": "result"}, {"name": "all_response", "type": "string", "variable_assign": "all_response"}], "args": [{"name": "all_info", "default_value": "​<span class=\"rich-mention__span\" data-id=\"all_info\" data-name=\"{{all_info}}\" contenteditable=\"false\" style=\"color: rgb(55, 171, 255); user-select: all;\">{{all_info}}</span>​", "type": "string"}, {"name": "last_user_response", "default_value": "​<span class=\"rich-mention__span\" data-id=\"last_user_response\" data-name=\"{{last_user_response}}\" contenteditable=\"false\" style=\"color: rgb(55, 171, 255); user-select: all;\">{{last_user_response}}</span>​​​", "type": "string"}, {"name": "last_response", "default_value": "​<span class=\"rich-mention__span\" data-id=\"last_response\" data-name=\"{{last_response}}\" contenteditable=\"false\" style=\"color: rgb(55, 171, 255); user-select: all;\">{{last_response}}</span>​​", "type": "string"}, {"name": "all_response", "default_value": "​<span class=\"rich-mention__span\" data-id=\"all_response\" data-name=\"{{all_response}}\" contenteditable=\"false\" style=\"color: rgb(55, 171, 255); user-select: all;\">{{all_response}}</span>​", "type": "string"}]}}, {"id": "5f0ec2d3-85b3-40ba-96ee-1f6ea69120bc", "type": "block", "initialized": false, "position": {"x": 1614.3385503807865, "y": 241.04515077118032}, "data": {"label": "Node7", "include_node_ids": ["74159968-768f-4de5-8bd5-701ef411a474"], "showToolBar": false}}, {"id": "608504a4-5e75-40c5-a595-e2838327304a", "type": "llmVariableAssignment", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "24b0f3fe-57d3-4358-abbf-64c8e1fa72f2", "showToolBar": false}, "blockId": "bcd55389-ceb8-4592-8ccc-5e58241fd2ff", "hidden": true, "config": {"title": "Node8", "desc": "", "prompt_template": "\n用户原有信息数据：​<span class=\"rich-mention__span\" data-id=\"all_info_check\" data-name=\"{{all_info_check}}\" contenteditable=\"false\" style=\"color: rgb(55, 171, 255); user-select: all;\">{{all_info_check}}</span>\n\n​上一轮询问:\"The information has been confirmed. Do you still need to make any changes?​\n用户输入：​<span class=\"rich-mention__span\" data-id=\"last_user_response\" data-name=\"{{last_user_response}}\" contenteditable=\"false\" style=\"color: rgb(55, 171, 255); user-select: all;\">{{last_user_response}}</span>​\n输出", "variable_assign": "all_info_check", "llm_config": {"rag_correlation_threshold": 65, "rag_max_reference_knowledge_num": 3, "divergence": 2, "prompt": "# 你是一名信用卡申请助手，当前系统接收到一份用户信息数据结构：\n为“用户原有信息数据”\n\n# 请根据以下规则生成下一步回复，并更新 response 与 verify_state 字段：\n## 首先判断用户是否针对上一轮询问回复，如果回复NO或表示无需更改，则verify_state 为 0\n## 如果 verify_state 为 \"null\"，说明用户尚未开始修改，请将 response 设置为：\n\"我们可以更新您提供的信息。请问您是否需要更改？（是/否）\"，如果用户回复YES或表示需要更改，并将 verify_state 设置为 \"1\"\n\n## 如果 verify_state 为 \"1\"，表示用户正在修改流程中，请先询问用户需要改下列哪个内容？\n1、whether_travel：请问您是否有高频的商务出行或者旅行需求？（是/否）\n\n2、whether_former_credit_card：请问您之前的信用卡是否还在继续使用？（是/否）\n\n3、whether_increase_credit_limit：请问您是否有提额需求？（是/否）\n\n4、whether_give_extra_request：如您有提额需求，是否还有其他补充额度方面的需要？（是/否）\n\n## 如果用户已经修改完某一特定字段信息，则将 response 设置为：\n\"感谢您的确认，您是否还需要修改其他信息？（是/否）\"，并将 verify_state 设置为 \"1\"\n\n# 注意：根据用户的输入内容动态填写字段值，未涉及的问题保留原样。最终输出格式必须为以下结构：\n{ \n\"whether_travel\": \"...\", \n\"whether_former_credit_card\": \"...\",\n\"whether_increase_credit_limit\": \"...\",\n\"whether_give_extra_request\": \"...\", \n\"response\": \"...\", \n\"verify_state\": \"...\" \n}\n## 输出response为英文，不需要输出中文", "llm_name": "azure-gpt-4o", "rag_question": "", "rag_range": "", "rag_enabled": "", "knowledge_base_ids": [], "knowledge_search_flag": false, "chat_history_flag": false, "chat_history_count": 5, "ltm_enabled": false, "ltm_search_range": "0", "ltm_robot_ids": [], "ltm_question": "", "ltm_recall_count": 5}}}, {"id": "bcd55389-ceb8-4592-8ccc-5e58241fd2ff", "type": "block", "initialized": false, "position": {"x": 2899.5785250360705, "y": 154.16666666666663}, "data": {"label": "Node8", "include_node_ids": ["608504a4-5e75-40c5-a595-e2838327304a"], "showToolBar": false}}, {"id": "e1445154-e637-40c8-a68f-96dcca4d090a", "type": "textReply", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "80092f3a-707e-4a11-9496-10ebf1c90cb8", "showToolBar": false}, "blockId": "910bcd05-bed1-4984-a3c3-8fcf619a0cba", "hidden": true, "config": {"async_run": false, "plain_text": [{"text": "Great! You've finished providing the information. Do you still need to make any changes?<br>", "id": "fa6810d6-abff-4248-bc1b-d4851a1590e3"}], "rich_text": [], "title": "Node9"}}, {"id": "910bcd05-bed1-4984-a3c3-8fcf619a0cba", "type": "block", "initialized": false, "position": {"x": 2306.511581134201, "y": 153.8303092770962}, "data": {"label": "Node9", "include_node_ids": ["e1445154-e637-40c8-a68f-96dcca4d090a"], "showToolBar": false}}, {"id": "03a87ff3-cc04-429c-aad6-e4fa5e2a6cb9", "type": "condition", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "0e2a1184-2a23-4b57-9d05-82b1a1c487df", "showToolBar": false}, "blockId": "5596e2cb-3058-4e9e-9650-0aba50d4ab6c", "hidden": true, "config": {"if_else_conditions": [{"condition_id": "89da8ff6-5b4a-4b31-95d7-ab5144e26cfe", "condition_name": "需要修改", "logical_operator": "and", "conditions": [{"condition_type": "variable", "comparison_operator": "=", "condition_value": "1", "condition_variable": "verify_state"}], "condition_action": []}, {"condition_name": "不需要修改", "logical_operator": "and", "conditions": [{"condition_type": "variable", "comparison_operator": "=", "condition_value": "0", "condition_variable": "verify_state"}], "condition_action": [], "condition_id": "dbfca267-4168-4e7c-9f5f-fec610440411"}, {"condition_id": "fe08b792-1429-4750-ab92-5451d46ae5d4", "condition_name": "Other", "logical_operator": "other", "conditions": [], "condition_action": []}], "title": "Node10"}}, {"id": "5596e2cb-3058-4e9e-9650-0aba50d4ab6c", "type": "block", "initialized": false, "position": {"x": 3555.6264107487386, "y": 136.16666666666663}, "data": {"label": "Node10", "include_node_ids": ["03a87ff3-cc04-429c-aad6-e4fa5e2a6cb9"], "showToolBar": false}}, {"id": "3e9bdfb9-272e-4f27-9959-96c2cd1b414f", "type": "code", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "ebc4e234-fb52-408f-a47f-2bfa00cd1dfa", "showToolBar": false}, "blockId": "6718024f-3ebf-40b6-b8f8-c1df60547dc5", "hidden": true, "config": {"title": "Node11", "desc": "", "code": "import re\nimport json\ndef main(all_info_check:str) -> dict:\n  # 解析json格式\n  all_info_check = re.findall(r'\\{.*\\}', all_info_check, re.DOTALL)[0]\n  all_info_check = eval(all_info_check)\n\n  # 取值\n  response = all_info_check[\"response\"]\n  verify_state = all_info_check[\"verify_state\"]\n  return {\n    \"response\": response,\n    \"verify_state\":verify_state\n}\n", "code_language": "python3", "outputs": [{"name": "verify_state", "type": "string", "variable_assign": "verify_state"}, {"name": "response", "type": "string", "variable_assign": "response"}], "args": [{"name": "all_info_check", "default_value": "​<span class=\"rich-mention__span\" data-id=\"all_info_check\" data-name=\"{{all_info_check}}\" contenteditable=\"false\" style=\"color: rgb(55, 171, 255); user-select: all;\">{{all_info_check}}</span>​", "type": "string"}]}}, {"id": "6718024f-3ebf-40b6-b8f8-c1df60547dc5", "type": "block", "initialized": false, "position": {"x": 3208.959744082072, "y": 142.83030927709618}, "data": {"label": "Node11", "include_node_ids": ["3e9bdfb9-272e-4f27-9959-96c2cd1b414f"], "showToolBar": false}}, {"id": "05273306-c567-4034-b7ef-9c11bb60ddd1", "type": "captureUserReply", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "80368b27-912f-464e-8e5c-a70543348a3c", "showToolBar": false}, "blockId": "15c244b0-067e-4da6-a01b-48a5f46e9389", "hidden": true, "config": {"variable_assign": "last_user_response", "title": "Node12"}}, {"id": "15c244b0-067e-4da6-a01b-48a5f46e9389", "type": "block", "initialized": false, "position": {"x": 2594.787517048274, "y": 155.9115875421261}, "data": {"label": "Node12", "include_node_ids": ["05273306-c567-4034-b7ef-9c11bb60ddd1"], "showToolBar": false}}, {"id": "116d4a82-77a7-4b49-b421-25bc63152ff2", "type": "textReply", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "8e13c89c-d4b2-4afe-89ec-e2e6af42984e", "showToolBar": false}, "blockId": "cda981da-edc6-4f4f-8d97-f821cb300c96", "hidden": true, "config": {"async_run": false, "plain_text": [{"text": "​<span class=\"rich-mention__span\" data-id=\"response\" data-name=\"{{response}}\" contenteditable=\"false\" style=\"color: rgb(55, 171, 255); user-select: all;\">{{response}}</span>​", "id": "1e1f9cf6-5adc-4e35-99a7-7c3ea6ce3b59"}], "rich_text": [], "title": "Node14"}}, {"id": "cda981da-edc6-4f4f-8d97-f821cb300c96", "type": "block", "initialized": false, "position": {"x": 3019.5785250360705, "y": 500.4118766055058}, "data": {"label": "Node14", "include_node_ids": ["116d4a82-77a7-4b49-b421-25bc63152ff2"], "showToolBar": false}}, {"id": "586641d8-fa42-421a-9dc0-66852ac32c4e", "type": "code", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "cbc7513a-e795-4234-a7c9-ab2c214bb2cb", "showToolBar": false}, "blockId": "33dee3f4-c827-4be3-a5b5-aa767605396b", "hidden": true, "config": {"title": "Node15", "desc": "all_info 加一个next_node", "code": "import re\nimport json\ndef main(all_info:str) -> dict:\n  # 解析json格式\n  all_info = re.findall(r'\\{.*\\}', all_info, re.DOTALL)[0]\n  all_info = eval(all_info)\n\n  all_info_check = all_info\n  all_info_check[\"verify_state\"] = \"null\"\n  return {\n    \"all_info_check\": all_info_check\n}\n", "code_language": "python3", "outputs": [{"name": "all_info_check", "type": "string", "variable_assign": "all_info_check"}], "args": [{"name": "all_info", "default_value": "​<span class=\"rich-mention__span\" data-id=\"all_info\" data-name=\"{{all_info}}\" contenteditable=\"false\" style=\"color: rgb(55, 171, 255); user-select: all;\">{{all_info}}</span>​", "type": "string"}]}}, {"id": "33dee3f4-c827-4be3-a5b5-aa767605396b", "type": "block", "initialized": false, "position": {"x": 2306.511581134201, "y": -159.3884960004313}, "data": {"label": "Node15", "include_node_ids": ["586641d8-fa42-421a-9dc0-66852ac32c4e"], "showToolBar": false}}, {"id": "c194aff6-d008-4f0c-9602-ca1e1a31193a", "type": "code", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "c8b3cbc3-c69b-42c5-b47f-120991cba8a9", "showToolBar": false}, "blockId": "b0592176-2a34-410c-8145-a0a7176330f1", "hidden": true, "config": {"title": "发送邮箱", "desc": "", "code": "import smtplib\nfrom email.mime.text import MIMEText\nfrom email.mime.multipart import MIMEMultipart\nimport random\nimport re\n\nuser_email = \"dyna.ai.assistant@gmail.com \"\nuser_name = \"Mr. Dyna\"\ndef send_email(from_email, password, to_email, subject, message, smtp):\n    # 创建邮件对象x\n    msg = MIMEMultipart()\n    msg['From'] = from_email\n    msg['To'] = to_email\n    msg['Subject'] = subject\n\n    # 添加邮件正文，设置为HTML格式\n    msg.attach(MIMEText(message, 'html'))\n\n    try:\n        # 连接到SMTP服务器\n        with smtplib.SMTP(smtp, 587) as server:\n            server.starttls()  # 开始加密会话\n            server.login(from_email, password)  # 登录到邮箱账户\n            server.send_message(msg)  # 发送邮件\n        return 'send success'\n    except Exception as e:\n        print(f\"Error: {e}\")\n        return 'send fail'\n\n\ndef generate_verification_code():\n    \"\"\"生成6位随机验证码\"\"\"\n    return random.randint(100000, 999999)\n\ndef get_first_name(name):\n    # 匹配第一个连续的字母序列\n    match = re.search(r'^[a-zA-Z]+', name)\n    if match:\n        return match.group(0)\n    return \"\"\n\n\ndef main(user_email,user_name):\n    # 邮件信息\n    smtp = 'smtp.office365.com'\n    from_email = 'agents-service@dyna.ai'  # 发送邮箱\n    password = '36C3470b519@'  # 邮箱密码\n    to_email = user_email\n    subject = 'Dyna Bank Verification Code'  # 邮件主题\n\n    # 生成验证码\n    verification_code = generate_verification_code()\n\n\n    # 使用 HTML 格式编写邮件内容\n    message = f\"\"\"\n    Dear {user_name},\n\n    Thank you for applying for the Premium Credit Card! We’ve received your application and are currently reviewing your details.  \n\n    **Next Steps:**  \n    1. Our team will verify the information provided.  \n    2. You’ll receive an update via email/SMS within 3 business days. \n    3. If approved, your card will be dispatched to your registered address.\n    \"\"\"\n\n    # 发送邮件并返回结果\n    result = send_email(from_email, password, to_email, subject, message, smtp)\n    return {\"result\": result, \"verification_code\": verification_code}", "code_language": "python3", "outputs": [{"name": "result", "type": "string", "variable_assign": "email_result"}], "args": []}}, {"id": "b0592176-2a34-410c-8145-a0a7176330f1", "type": "block", "initialized": false, "position": {"x": 5238.615722371556, "y": -166.04216666426407}, "data": {"label": "发送邮箱", "include_node_ids": ["c194aff6-d008-4f0c-9602-ca1e1a31193a"], "showToolBar": false}}, {"id": "a0cf3c1f-690d-4e51-8871-c03247bb1c8a", "type": "code", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "7e37a098-e74d-44c4-b645-f4af71c6d9d8", "showToolBar": false}, "blockId": "3eb7424e-cb59-42a8-bac5-da225afb4111", "hidden": true, "config": {"title": "发送WhatsApp", "desc": "", "code": "import time\nimport requests\nnumber =  \"+2348067032494\"#\"+8617319276652\"\nsend_text = \"\"\"\n        Dear Mr. Dyna,\n\n        Thank you for applying for the Premium Credit Card! We’ve received your application and are currently reviewing your details.  \n\n        **Next Steps:**  \n        1. Our team will verify the information provided.  \n        2. You’ll receive an update via email/SMS within 3 business days. \n        3. If approved, your card will be dispatched to your registered address.\n        \"\"\"\nclass WhatsAppSend(object):\n    def __init__(self, number=\"+6282123000832\", api_key=\"9cb12b25d77fea3e0b8f84f3bc9edaeb\"):\n        self.url = \"https://api.ycloud.com/v2/whatsapp/messages/sendDirectly\"\n        self.headers = {\n            \"accept\": \"application/json\",\n            \"content-type\": \"application/json\",\n            \"X-API-KEY\": api_key\n        }\n        self.from_number = self.handle_number(number)\n\n    def handle_number(self, number):\n        # 如果后续要做手机号校验可以在这里处理\n        return number\n\n    def send_message(self, text, number):\n        \"\"\"发送文本消息\"\"\"\n        to_number = self.handle_number(number)\n        payload = {\n            \"type\": \"text\",\n            \"from\": self.from_number,\n            \"to\": to_number,\n            \"text\": {\n                \"body\": text,\n            }\n        }\n        try:\n            response = requests.post(self.url, json=payload, headers=self.headers)\n            data = response.json()\n            # 成功时，一般可以从 data 中获取一个唯一的 message_id\n            return True, data.get(\"id\")\n        except Exception as e:\n            print(e)\n            return False, \"\"\n\n    def send_template_message(self, template_name, number, language_code=\"zh_CN\"):\n        \"\"\"发送模板消息\"\"\"\n        to_number = self.handle_number(number)\n        payload = {\n            \"type\": \"template\",\n            \"from\": self.from_number,\n            \"to\": to_number,\n            \"template\": {\n                \"name\": template_name,\n                \"language\": {\n                    \"code\": language_code\n                }\n            }\n        }\n        try:\n            response = requests.post(self.url, json=payload, headers=self.headers)\n            data = response.json()\n            print(data)\n            return True, data.get(\"id\")\n        except Exception as e:\n            print(e)\n            return False, \"\"\n\n    def message_detail(self, message_id):\n        url = f\"https://api.ycloud.com/v2/whatsapp/messages/{message_id}\"\n        try:\n            response = requests.get(url, headers=self.headers)\n            data = response.json()\n            # 这里可以打印或处理返回的状态信息\n            print(data)\n            return True, data.get(\"status\")\n        except Exception as e:\n            print(e)\n            return False, \"\"\n\n    def send(self, text, number, template_name=\"cybertron_tes1\", language_code=\"zh_CN\"):\n        \"\"\"综合发送逻辑:\n           先尝试直接发送消息，如发送失败再用模板消息勾起对话窗口，然后再次发送。\n        \"\"\"\n        flag, message_id = self.send_message(text, number)\n        if flag:\n            time.sleep(3)\n            status_flag, status = self.message_detail(message_id)\n            if status_flag:\n                if status == \"failed\":\n                    # 如果状态是 failed，尝试先发送模板消息再发送文本\n                    self.send_template_message(template_name, number=number, language_code=language_code)\n                    time.sleep(3)\n                    self.send_message(text, number)\n                else:\n                    print(\"send message success\")\n            else:\n                print(\"check message detail failed\")\n        else:\n            print(\"send message failed\")\n\n\ndef main(number, send_text):\n    \"\"\"\n    :param number: 发送的手机号，带国家码，如 +17319276652\n    :param send_text: 发送的文本内容\n    :return: 统一返回一个结果，包含是否成功以及任何需要的错误信息\n    \"\"\"\n    text = send_text\n    template_name = \"studio_test\"\n    language_code = \"en_US\"\n    only_template = False #  True\n\n    # 创建实例\n    sender = WhatsAppSend()\n\n    try:\n        if only_template:\n            flag, message_id = sender.send_template_message(\n                template_name,\n                number=number,\n                language_code=language_code\n            )\n            # 返回执行结果\n            return {\n                \"status\": \"template_only\",\n                \"success\": flag,\n                \"message_id\": message_id\n            }\n        else:\n            # send() 内部会先尝试发送文本，如果失败则再发模板+文本\n            sender.send(text, number=number, template_name=template_name, language_code=language_code)\n            # 如果你需要更详细的发送状态，需要在 send() 里做返回，再在这里捕获\n            return {\n                \"status\": \"send_flow_done\",\n                \"success\": True\n            }\n    except Exception as e:\n        # 捕获任意异常，返回给调用方以便排查\n        return {\n            \"status\": \"error\",\n            \"success\": False,\n            \"error_message\": str(e)\n        }", "code_language": "python3", "outputs": [{"name": "status", "type": "string", "variable_assign": "state"}], "args": []}}, {"id": "3eb7424e-cb59-42a8-bac5-da225afb4111", "type": "block", "initialized": false, "position": {"x": 5238.615722371556, "y": 253.09310799977638}, "data": {"label": "发送WhatsApp", "include_node_ids": ["a0cf3c1f-690d-4e51-8871-c03247bb1c8a"], "showToolBar": false}}, {"id": "2e2fce3c-902c-49bb-a4b1-17db99f6b429", "type": "textReply", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "25d4ee0e-e0fe-4570-badc-38956167c4ec", "showToolBar": false}, "blockId": "cacf88d4-5468-4946-9541-576384502cdd", "hidden": true, "config": {"async_run": false, "plain_text": [{"text": "I’ve successfully sent the information via email and WhatsApp. Please check your notifications.<br>", "id": "eab2c323-742e-49c0-9894-9d11d318cc74"}], "rich_text": [], "title": "Node19"}}, {"id": "cacf88d4-5468-4946-9541-576384502cdd", "type": "block", "initialized": false, "position": {"x": 5714.093832299704, "y": 248.95994578198892}, "data": {"label": "Node19", "include_node_ids": ["2e2fce3c-902c-49bb-a4b1-17db99f6b429"], "showToolBar": false}}, {"id": "f80a13c5-f524-457e-881a-56794dc04b77", "type": "llmVariableAssignment", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "03b82b66-c59f-41d4-a300-be629ba2713d", "showToolBar": false}, "blockId": "14bc32cc-81ff-4706-bcc6-abbf852b5365", "hidden": true, "config": {"title": "Node23", "desc": "", "prompt_template": "用户输入：​<span class=\"rich-mention__span\" data-id=\"last_user_response\" data-name=\"{{last_user_response}}\" contenteditable=\"false\" style=\"color: rgb(55, 171, 255); user-select: all;\">{{last_user_response}}</span>​\n\n判断用户是否confirm，如果confirm，则只输出confirm，\n如果用户表示不是confirm，则继续委婉的询问用户是否confirm,", "variable_assign": "user_confirm", "llm_config": {"rag_correlation_threshold": 65, "rag_max_reference_knowledge_num": 3, "divergence": 2, "prompt": "", "llm_name": "azure-gpt-4o", "rag_question": "", "rag_range": "", "rag_enabled": "", "knowledge_base_ids": [], "knowledge_search_flag": false, "chat_history_flag": false, "chat_history_count": 5, "ltm_enabled": false, "ltm_search_range": "0", "ltm_robot_ids": [], "ltm_question": "", "ltm_recall_count": 5}}}, {"id": "14bc32cc-81ff-4706-bcc6-abbf852b5365", "type": "block", "initialized": false, "position": {"x": 4359.25914501094, "y": -139.38310267399083}, "data": {"label": "Node23", "include_node_ids": ["f80a13c5-f524-457e-881a-56794dc04b77"], "showToolBar": false}}, {"id": "7b53e641-8cb0-45fa-81ff-b64c23f7ca51", "type": "captureUserReply", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "22a4f668-8dd4-4f24-bcad-420135d22306", "showToolBar": false}, "blockId": "8ff878b3-321a-42ea-8499-6def1a498d1a", "hidden": true, "config": {"variable_assign": "last_user_response", "title": "Node26"}}, {"id": "8ff878b3-321a-42ea-8499-6def1a498d1a", "type": "block", "initialized": false, "position": {"x": 3927.594150658946, "y": -140.9585600691194}, "data": {"label": "Node26", "include_node_ids": ["7b53e641-8cb0-45fa-81ff-b64c23f7ca51"], "showToolBar": false}}, {"id": "1b6319d5-c9da-47c4-aa00-7a30a7c08f80", "type": "textReply", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "5d8881b4-84fa-4b7b-9e9e-25eb1acc5c72", "showToolBar": false}, "blockId": "7717793c-090a-457c-b21f-e4a8be674f0b", "hidden": true, "config": {"async_run": false, "plain_text": [{"text": "May I know if you frequently travel for business?", "id": "ff3ddb82-9ab9-46bc-8c42-cf3c093bcdd5"}], "rich_text": [], "title": "Node24"}}, {"id": "7717793c-090a-457c-b21f-e4a8be674f0b", "type": "block", "initialized": false, "position": {"x": 645.7922993278337, "y": 252.62527596355216}, "data": {"label": "Node24", "include_node_ids": ["1b6319d5-c9da-47c4-aa00-7a30a7c08f80"], "showToolBar": false}}, {"id": "47708447-633b-4e82-ab76-7d467c4a5676", "type": "llMReply", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "d89e3b8c-23dc-4762-a74c-42cfd03ac354", "showToolBar": false}, "blockId": "e8c41523-694e-4554-9a13-b3135b6722ed", "hidden": true, "config": {"desc": "", "prompt_template": "card information:\n​<span class=\"rich-mention__span\" data-id=\"all_info_check\" data-name=\"{{all_info_check}}\" contenteditable=\"false\" style=\"color: rgb(55, 171, 255); user-select: all;\">{{all_info_check}}</span>​\n<br>", "async_run": false, "llm_config": {"rag_correlation_threshold": 65, "rag_max_reference_knowledge_num": 3, "slang_enable": false, "divergence": 2, "prompt": "Please extract the details from card information and present each field as a brief, natural‐language statement. and Do not make mistake\n Do not include the response or verify_state fields.\nOnce you’ve listed everything, ask:\n“If all the information is correct, please reply with ‘yes’ to confirm.”", "llm_name": "azure-gpt-4o", "rag_question": "", "rag_range": "", "rag_enabled": "", "knowledge_base_ids": [], "knowledge_search_flag": false, "chat_history_flag": true, "chat_history_count": 5, "ltm_enabled": false, "ltm_search_range": "0", "ltm_robot_ids": [], "ltm_question": "", "ltm_recall_count": 5, "verify_enable": false, "verify_count": 5, "verify_constraints": "", "main_condition_id": "02bf414b-f15b-426d-843b-78a5641842ae", "other_condition_id": "141bf726-5e50-4c03-8b90-a96e20fa9298"}, "title": "Node24"}}, {"id": "e8c41523-694e-4554-9a13-b3135b6722ed", "type": "block", "initialized": false, "position": {"x": 3534.7324586491804, "y": -136.9585600691194}, "data": {"label": "Node24", "include_node_ids": ["47708447-633b-4e82-ab76-7d467c4a5676"], "showToolBar": false}}, {"id": "714af198-3fbd-4bd7-8df0-74c2a2512009", "type": "textReply", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "5fbca17a-e78c-4c5d-8231-1ccd3bb205fa", "showToolBar": false}, "blockId": "e3374603-2362-40c1-984c-b419db0509ad", "hidden": true, "config": {"async_run": false, "plain_text": [{"text": "Okay! Please provide your email address.", "id": "d0bcb166-b239-4b91-afe9-6b431ef0b7c8"}], "rich_text": [], "title": "Node24"}}, {"id": "e3374603-2362-40c1-984c-b419db0509ad", "type": "block", "initialized": false, "position": {"x": 3937.2400461597754, "y": 188.6666666666666}, "data": {"label": "Node24", "include_node_ids": ["714af198-3fbd-4bd7-8df0-74c2a2512009"], "showToolBar": false}}, {"id": "2dc2a365-0538-40b0-a0d3-85008b92ebd2", "type": "textReply", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "b1b1c32b-e8d0-40de-b79a-a0baaf21813f", "showToolBar": false}, "blockId": "c71ea577-accf-47af-ab05-4dc8ee21a89f", "hidden": true, "config": {"async_run": false, "plain_text": [{"text": "Got it! Please provide your Whatsapp number.", "id": "24d8db12-1dad-4ccc-bc80-a7a943b34e86"}], "rich_text": [], "title": "Node25"}}, {"id": "c71ea577-accf-47af-ab05-4dc8ee21a89f", "type": "block", "initialized": false, "position": {"x": 4359.25914501094, "y": 192.62527596355216}, "data": {"label": "Node25", "include_node_ids": ["2dc2a365-0538-40b0-a0d3-85008b92ebd2"], "showToolBar": false}}, {"id": "181a8a9c-ce8c-44fb-949e-5e09bec9be76", "type": "captureUserReply", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "68c5b8af-1794-401a-9b93-6802b1c37472", "showToolBar": false}, "blockId": "3f3c9a47-9f79-4264-ac81-a03fc820d79c", "hidden": true, "config": {"variable_assign": "last_user_response", "title": "Node24"}}, {"id": "3f3c9a47-9f79-4264-ac81-a03fc820d79c", "type": "block", "initialized": false, "position": {"x": 3936.9600637042445, "y": 417.0516661466926}, "data": {"label": "Node24", "include_node_ids": ["181a8a9c-ce8c-44fb-949e-5e09bec9be76"], "showToolBar": false}}, {"id": "cd494ba0-8f9c-4e59-8f21-ca925f7bdc36", "type": "captureUserReply", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "69c83c2e-d150-4e4d-a82b-7ca312953cea", "showToolBar": false}, "blockId": "aa5b7099-72c0-46d5-8149-d0e13c015ad1", "hidden": true, "config": {"variable_assign": "last_user_response", "title": "Node25"}}, {"id": "aa5b7099-72c0-46d5-8149-d0e13c015ad1", "type": "block", "initialized": false, "position": {"x": 4359.25914501094, "y": 417.05166614669264}, "data": {"label": "Node25", "include_node_ids": ["cd494ba0-8f9c-4e59-8f21-ca925f7bdc36"], "showToolBar": false}}, {"id": "42d45884-803a-45f5-a657-c1bb67c528fa", "type": "textReply", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "bb358d02-ee2b-4270-8c37-9ff983b00119", "showToolBar": false}, "blockId": "6662ec9d-5bb2-4c26-810e-a1c344f2e476", "hidden": true, "config": {"async_run": true, "plain_text": [{"text": "We have received your WhatsApp and email information. An account manager will reach out to you shortly.\n\n", "id": "b7b49494-7ef2-498c-9e37-d4e23285f5c0"}], "rich_text": [], "title": "Node26"}}, {"id": "6662ec9d-5bb2-4c26-810e-a1c344f2e476", "type": "block", "initialized": false, "position": {"x": 4725.447801819205, "y": 422.9072881098875}, "data": {"label": "Node26", "include_node_ids": ["42d45884-803a-45f5-a657-c1bb67c528fa"], "showToolBar": false}}, {"id": "ae8658a8-1427-4258-9d34-b63ede630a0e", "type": "textReply", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "56732fcb-7759-4df1-9309-4467043d28e7", "showToolBar": false}, "blockId": "7a07b4b0-0a5b-45a5-8f86-831e1625ef2a", "hidden": true, "config": {"async_run": false, "plain_text": [{"text": "Hello, Mr. Dyna! Thank you for your cooperation. As we discussed overthe phone, I’m here to assist you with your Premium Card application. Ijust have a few quick questions—it won’t take long. Let’s get started!", "id": "928a9bd3-f6bd-4378-b0e8-1c289b16f9f4"}], "rich_text": [], "title": "Node27"}}, {"id": "7a07b4b0-0a5b-45a5-8f86-831e1625ef2a", "type": "block", "initialized": false, "position": {"x": -2.035595751128483, "y": 215.04515077118035}, "data": {"label": "Node27", "include_node_ids": ["ae8658a8-1427-4258-9d34-b63ede630a0e"], "showToolBar": false}}, {"id": "ed66ef82-975e-4888-88f1-f7c165b50f4a", "type": "textReply", "initialized": false, "position": {"x": 0, "y": 0}, "data": {"sourceHandle": "e1b9f690-4c07-4d10-a061-94b6871e7afc", "showToolBar": false}, "blockId": "ec3568ae-82b2-472d-9f1e-d83650a401bf", "hidden": true, "config": {"async_run": false, "plain_text": [{"text": "We'll send you the application confirmation to your Email and WhatsAPP. Have a good day", "id": "d48d3e04-add3-4b7e-9da5-a9cb3e3abbc2"}], "rich_text": [], "title": "Node28"}}, {"id": "ec3568ae-82b2-472d-9f1e-d83650a401bf", "type": "block", "initialized": false, "position": {"x": 4832.2566049389, "y": -162.29013972982273}, "data": {"label": "Node28", "include_node_ids": ["ed66ef82-975e-4888-88f1-f7c165b50f4a"], "showToolBar": false}}], "edges": [{"id": "vueflow__edge-b8d5b4fa-9546-4d2e-be25-874f2d237f48ce8f1ce9-8494-4b91-9c78-4af43b96614c-c9b42c8e-61a4-4204-803e-8bbf395c5545fb1611cf-0526-4a16-aa11-6bd2475dd1a9", "type": "custom", "source": "b8d5b4fa-9546-4d2e-be25-874f2d237f48", "target": "c9b42c8e-61a4-4204-803e-8bbf395c5545", "sourceHandle": "ce8f1ce9-8494-4b91-9c78-4af43b96614c", "targetHandle": "fb1611cf-0526-4a16-aa11-6bd2475dd1a9", "data": {"hovering": false}, "label": "", "sourceX": 1227.0759258158155, "sourceY": 335.66666666666663, "targetX": 1302.2504401705924, "targetY": 335.2642062205311, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-14957a14-c508-4fb4-abb1-9a9b91d983290faa4d3b-8d88-4c5f-8978-9f22ecfe1950-b8d5b4fa-9546-4d2e-be25-874f2d237f48a84b9888-dbc1-4e50-82b2-1aef24f4891f", "type": "custom", "source": "14957a14-c508-4fb4-abb1-9a9b91d98329", "target": "b8d5b4fa-9546-4d2e-be25-874f2d237f48", "sourceHandle": "0faa4d3b-8d88-4c5f-8978-9f22ecfe1950", "targetHandle": "a84b9888-dbc1-4e50-82b2-1aef24f4891f", "data": {"hovering": false}, "label": "", "sourceX": 1535.2504401705924, "sourceY": 710.9118766055059, "targetX": 996.0758647806593, "targetY": 335.66666666666663, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-277c1b81-13c9-4c35-a78d-ec2f0be1f303dd4c78a9-8e43-4981-b7ad-2d00e08ffdc7-14957a14-c508-4fb4-abb1-9a9b91d98329b3d71a74-55ec-4d46-a2e9-7bc3b71664eb", "type": "custom", "source": "277c1b81-13c9-4c35-a78d-ec2f0be1f303", "target": "14957a14-c508-4fb4-abb1-9a9b91d98329", "sourceHandle": "dd4c78a9-8e43-4981-b7ad-2d00e08ffdc7", "targetHandle": "b3d71a74-55ec-4d46-a2e9-7bc3b71664eb", "data": {"hovering": false}, "label": "", "sourceX": 2139.0287725237113, "sourceY": 308.66666666666663, "targetX": 1302.2504401705924, "targetY": 710.9118766055059, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-910bcd05-bed1-4984-a3c3-8fcf619a0cba80092f3a-707e-4a11-9496-10ebf1c90cb8-15c244b0-067e-4da6-a01b-48a5f46e938905273306-c567-4034-b7ef-9c11bb60ddd1", "type": "custom", "source": "910bcd05-bed1-4984-a3c3-8fcf619a0cba", "target": "15c244b0-067e-4da6-a01b-48a5f46e9389", "sourceHandle": "80092f3a-707e-4a11-9496-10ebf1c90cb8", "targetHandle": "05273306-c567-4034-b7ef-9c11bb60ddd1", "data": {"hovering": false}, "label": "", "sourceX": 2535.511581134201, "sourceY": 251.83032453588527, "targetX": 2592.787517048274, "targetY": 242.9115875421261, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-cda981da-edc6-4f4f-8d97-f821cb300c968e13c89c-d4b2-4afe-89ec-e2e6af42984e-15c244b0-067e-4da6-a01b-48a5f46e938905273306-c567-4034-b7ef-9c11bb60ddd1", "type": "custom", "source": "cda981da-edc6-4f4f-8d97-f821cb300c96", "target": "15c244b0-067e-4da6-a01b-48a5f46e9389", "sourceHandle": "8e13c89c-d4b2-4afe-89ec-e2e6af42984e", "targetHandle": "05273306-c567-4034-b7ef-9c11bb60ddd1", "data": {"hovering": false}, "label": "", "sourceX": 3248.5785250360705, "sourceY": 565.4118766055058, "targetX": 2592.787517048274, "targetY": 242.9115875421261, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-277c1b81-13c9-4c35-a78d-ec2f0be1f303285e46b2-682a-4caa-8cfa-68c71ed65c1e-33dee3f4-c827-4be3-a5b5-aa767605396b586641d8-fa42-421a-9dc0-66852ac32c4e", "type": "custom", "source": "277c1b81-13c9-4c35-a78d-ec2f0be1f303", "target": "33dee3f4-c827-4be3-a5b5-aa767605396b", "sourceHandle": "285e46b2-682a-4caa-8cfa-68c71ed65c1e", "targetHandle": "586641d8-fa42-421a-9dc0-66852ac32c4e", "data": {"hovering": false}, "label": "", "sourceX": 2139.0287725237113, "sourceY": 349.66666666666663, "targetX": 2302.511581134201, "targetY": -65.3884960004313, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-33dee3f4-c827-4be3-a5b5-aa767605396bcbc7513a-e795-4234-a7c9-ab2c214bb2cb-910bcd05-bed1-4984-a3c3-8fcf619a0cbae1445154-e637-40c8-a68f-96dcca4d090a", "type": "custom", "source": "33dee3f4-c827-4be3-a5b5-aa767605396b", "target": "910bcd05-bed1-4984-a3c3-8fcf619a0cba", "sourceHandle": "cbc7513a-e795-4234-a7c9-ab2c214bb2cb", "targetHandle": "e1445154-e637-40c8-a68f-96dcca4d090a", "data": {"hovering": false}, "label": "", "sourceX": 2535.511581134201, "sourceY": -65.3884960004313, "targetX": 2302.511581134201, "targetY": 251.83032453588527, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-15c244b0-067e-4da6-a01b-48a5f46e938980368b27-912f-464e-8e5c-a70543348a3c-bcd55389-ceb8-4592-8ccc-5e58241fd2ff608504a4-5e75-40c5-a595-e2838327304a", "type": "custom", "source": "15c244b0-067e-4da6-a01b-48a5f46e9389", "target": "bcd55389-ceb8-4592-8ccc-5e58241fd2ff", "sourceHandle": "80368b27-912f-464e-8e5c-a70543348a3c", "targetHandle": "608504a4-5e75-40c5-a595-e2838327304a", "data": {"hovering": false}, "label": "", "sourceX": 2823.787517048274, "sourceY": 242.9115875421261, "targetX": 2895.5785250360705, "targetY": 228.16666666666663, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-bcd55389-ceb8-4592-8ccc-5e58241fd2ff24b0f3fe-57d3-4358-abbf-64c8e1fa72f2-6718024f-3ebf-40b6-b8f8-c1df60547dc53e9bdfb9-272e-4f27-9959-96c2cd1b414f", "type": "custom", "source": "bcd55389-ceb8-4592-8ccc-5e58241fd2ff", "target": "6718024f-3ebf-40b6-b8f8-c1df60547dc5", "sourceHandle": "24b0f3fe-57d3-4358-abbf-64c8e1fa72f2", "targetHandle": "3e9bdfb9-272e-4f27-9959-96c2cd1b414f", "data": {"hovering": false}, "label": "", "sourceX": 3128.5785250360705, "sourceY": 228.16666666666663, "targetX": 3204.959744082072, "targetY": 236.83032453588524, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-6718024f-3ebf-40b6-b8f8-c1df60547dc5ebc4e234-fb52-408f-a47f-2bfa00cd1dfa-5596e2cb-3058-4e9e-9650-0aba50d4ab6c03a87ff3-cc04-429c-aad6-e4fa5e2a6cb9", "type": "custom", "source": "6718024f-3ebf-40b6-b8f8-c1df60547dc5", "target": "5596e2cb-3058-4e9e-9650-0aba50d4ab6c", "sourceHandle": "ebc4e234-fb52-408f-a47f-2bfa00cd1dfa", "targetHandle": "03a87ff3-cc04-429c-aad6-e4fa5e2a6cb9", "data": {"hovering": false}, "label": "", "sourceX": 3437.959744082072, "sourceY": 236.83032453588524, "targetX": 3553.6264107487386, "targetY": 251.1666819254557, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-5596e2cb-3058-4e9e-9650-0aba50d4ab6c89da8ff6-5b4a-4b31-95d7-ab5144e26cfe-cda981da-edc6-4f4f-8d97-f821cb300c96116d4a82-77a7-4b49-b421-25bc63152ff2", "type": "custom", "source": "5596e2cb-3058-4e9e-9650-0aba50d4ab6c", "target": "cda981da-edc6-4f4f-8d97-f821cb300c96", "sourceHandle": "89da8ff6-5b4a-4b31-95d7-ab5144e26cfe", "targetHandle": "116d4a82-77a7-4b49-b421-25bc63152ff2", "data": {"hovering": false}, "label": "", "sourceX": 3785.6264107487386, "sourceY": 210.16666666666663, "targetX": 3015.5785250360705, "targetY": 565.4118766055058, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-c9b42c8e-61a4-4204-803e-8bbf395c5545b9ee77a4-4420-4aa6-833a-96bc5ac95d09-5f0ec2d3-85b3-40ba-96ee-1f6ea69120bc74159968-768f-4de5-8bd5-701ef411a474", "type": "custom", "source": "c9b42c8e-61a4-4204-803e-8bbf395c5545", "target": "5f0ec2d3-85b3-40ba-96ee-1f6ea69120bc", "sourceHandle": "b9ee77a4-4420-4aa6-833a-96bc5ac95d09", "targetHandle": "74159968-768f-4de5-8bd5-701ef411a474", "data": {"hovering": false}, "label": "", "sourceX": 1535.2504401705924, "sourceY": 335.2642062205311, "targetX": 1610.3385503807865, "targetY": 335.0451507711803, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-5f0ec2d3-85b3-40ba-96ee-1f6ea69120bc72ab89fe-82ee-4d5f-90fa-df79136778be-277c1b81-13c9-4c35-a78d-ec2f0be1f303cad7b46e-3cc9-4ae7-9455-21d33621da95", "type": "custom", "source": "5f0ec2d3-85b3-40ba-96ee-1f6ea69120bc", "target": "277c1b81-13c9-4c35-a78d-ec2f0be1f303", "sourceHandle": "72ab89fe-82ee-4d5f-90fa-df79136778be", "targetHandle": "cad7b46e-3cc9-4ae7-9455-21d33621da95", "data": {"hovering": false}, "label": "", "sourceX": 1843.3385503807865, "sourceY": 335.0451507711803, "targetX": 1907.028650453399, "targetY": 349.66666666666663, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-3eb7424e-cb59-42a8-bac5-da225afb41117e37a098-e74d-44c4-b645-f4af71c6d9d8-cacf88d4-5468-4946-9541-576384502cdd2e2fce3c-902c-49bb-a4b1-17db99f6b429", "type": "custom", "source": "3eb7424e-cb59-42a8-bac5-da225afb4111", "target": "cacf88d4-5468-4946-9541-576384502cdd", "sourceHandle": "7e37a098-e74d-44c4-b645-f4af71c6d9d8", "targetHandle": "2e2fce3c-902c-49bb-a4b1-17db99f6b429", "data": {"hovering": false}, "label": "", "sourceX": 5467.615722371556, "sourceY": 347.0931079997764, "targetX": 5710.093832299704, "targetY": 346.95994578198895, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-8ff878b3-321a-42ea-8499-6def1a498d1a22a4f668-8dd4-4f24-bcad-420135d22306-14bc32cc-81ff-4706-bcc6-abbf852b5365f80a13c5-f524-457e-881a-56794dc04b77", "type": "custom", "source": "8ff878b3-321a-42ea-8499-6def1a498d1a", "target": "14bc32cc-81ff-4706-bcc6-abbf852b5365", "sourceHandle": "22a4f668-8dd4-4f24-bcad-420135d22306", "targetHandle": "f80a13c5-f524-457e-881a-56794dc04b77", "data": {"hovering": false}, "label": "", "sourceX": 4156.594150658946, "sourceY": -53.958560069119386, "targetX": 4355.25914501094, "targetY": -65.38310267399083, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-6cf10513-60ae-40d4-ba6f-51d82e28ab49ab76726e-db57-4896-adb2-5cec01bb1781-7717793c-090a-457c-b21f-e4a8be674f0b1b6319d5-c9da-47c4-aa00-7a30a7c08f80", "type": "custom", "source": "6cf10513-60ae-40d4-ba6f-51d82e28ab49", "target": "7717793c-090a-457c-b21f-e4a8be674f0b", "sourceHandle": "ab76726e-db57-4896-adb2-5cec01bb1781", "targetHandle": "1b6319d5-c9da-47c4-aa00-7a30a7c08f80", "data": {"hovering": false}, "label": "", "sourceX": 557.9179578204364, "sourceY": 328.66666666666663, "targetX": 641.7922993278337, "targetY": 328.62527596355216, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-7717793c-090a-457c-b21f-e4a8be674f0b5d8881b4-84fa-4b7b-9e9e-25eb1acc5c72-b8d5b4fa-9546-4d2e-be25-874f2d237f48a84b9888-dbc1-4e50-82b2-1aef24f4891f", "type": "custom", "source": "7717793c-090a-457c-b21f-e4a8be674f0b", "target": "b8d5b4fa-9546-4d2e-be25-874f2d237f48", "sourceHandle": "5d8881b4-84fa-4b7b-9e9e-25eb1acc5c72", "targetHandle": "a84b9888-dbc1-4e50-82b2-1aef24f4891f", "data": {"hovering": false}, "label": "", "sourceX": 874.7922993278337, "sourceY": 328.62527596355216, "targetX": 996.0758647806593, "targetY": 335.66666666666663, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-5596e2cb-3058-4e9e-9650-0aba50d4ab6cdbfca267-4168-4e7c-9f5f-fec610440411-e8c41523-694e-4554-9a13-b3135b6722ed47708447-633b-4e82-ab76-7d467c4a5676", "type": "custom", "source": "5596e2cb-3058-4e9e-9650-0aba50d4ab6c", "target": "e8c41523-694e-4554-9a13-b3135b6722ed", "sourceHandle": "dbfca267-4168-4e7c-9f5f-fec610440411", "targetHandle": "47708447-633b-4e82-ab76-7d467c4a5676", "data": {"hovering": false}, "label": "", "sourceX": 3785.6264107487386, "sourceY": 251.1666819254557, "targetX": 3530.7324586491804, "targetY": -62.958560069119386, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-e8c41523-694e-4554-9a13-b3135b6722ed02bf414b-f15b-426d-843b-78a5641842ae-8ff878b3-321a-42ea-8499-6def1a498d1a7b53e641-8cb0-45fa-81ff-b64c23f7ca51", "type": "custom", "source": "e8c41523-694e-4554-9a13-b3135b6722ed", "target": "8ff878b3-321a-42ea-8499-6def1a498d1a", "sourceHandle": "02bf414b-f15b-426d-843b-78a5641842ae", "targetHandle": "7b53e641-8cb0-45fa-81ff-b64c23f7ca51", "data": {"hovering": false}, "label": "", "sourceX": 3764.7324586491804, "sourceY": -62.958560069119386, "targetX": 3925.594150658946, "targetY": -53.958560069119386, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-e3374603-2362-40c1-984c-b419db0509ad5fbca17a-e78c-4c5d-8231-1ccd3bb205fa-3f3c9a47-9f79-4264-ac81-a03fc820d79c181a8a9c-ce8c-44fb-949e-5e09bec9be76", "type": "custom", "source": "e3374603-2362-40c1-984c-b419db0509ad", "target": "3f3c9a47-9f79-4264-ac81-a03fc820d79c", "sourceHandle": "5fbca17a-e78c-4c5d-8231-1ccd3bb205fa", "targetHandle": "181a8a9c-ce8c-44fb-949e-5e09bec9be76", "data": {"hovering": false}, "label": "", "sourceX": 4166.2402903004, "sourceY": 264.6666819254557, "targetX": 3934.9600637042445, "targetY": 504.05163562911446, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-3f3c9a47-9f79-4264-ac81-a03fc820d79c68c5b8af-1794-401a-9b93-6802b1c37472-c71ea577-accf-47af-ab05-4dc8ee21a89f2dc2a365-0538-40b0-a0d3-85008b92ebd2", "type": "custom", "source": "3f3c9a47-9f79-4264-ac81-a03fc820d79c", "target": "c71ea577-accf-47af-ab05-4dc8ee21a89f", "sourceHandle": "68c5b8af-1794-401a-9b93-6802b1c37472", "targetHandle": "2dc2a365-0538-40b0-a0d3-85008b92ebd2", "data": {"hovering": false}, "label": "", "sourceX": 4165.960063704244, "sourceY": 504.05163562911446, "targetX": 4355.25914501094, "targetY": 268.62527596355216, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-c71ea577-accf-47af-ab05-4dc8ee21a89fb1b1c32b-e8d0-40de-b79a-a0baaf21813f-aa5b7099-72c0-46d5-8149-d0e13c015ad1cd494ba0-8f9c-4e59-8f21-ca925f7bdc36", "type": "custom", "source": "c71ea577-accf-47af-ab05-4dc8ee21a89f", "target": "aa5b7099-72c0-46d5-8149-d0e13c015ad1", "sourceHandle": "b1b1c32b-e8d0-40de-b79a-a0baaf21813f", "targetHandle": "cd494ba0-8f9c-4e59-8f21-ca925f7bdc36", "data": {"hovering": false}, "label": "", "sourceX": 4588.25914501094, "sourceY": 268.62527596355216, "targetX": 4357.25914501094, "targetY": 504.0516356291145, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-7a07b4b0-0a5b-45a5-8f86-831e1625ef2a56732fcb-7759-4df1-9309-4467043d28e7-6cf10513-60ae-40d4-ba6f-51d82e28ab490217c035-b45c-4046-8815-264ab8a88e27", "type": "custom", "source": "7a07b4b0-0a5b-45a5-8f86-831e1625ef2a", "target": "6cf10513-60ae-40d4-ba6f-51d82e28ab49", "sourceHandle": "56732fcb-7759-4df1-9309-4467043d28e7", "targetHandle": "0217c035-b45c-4046-8815-264ab8a88e27", "data": {"hovering": false}, "label": "", "sourceX": 226.96440043417425, "sourceY": 335.04516602996944, "targetX": 324.9179273028583, "targetY": 328.66666666666663, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-b0592176-2a34-410c-8145-a0a7176330f1c8b3cbc3-c69b-42c5-b47f-120991cba8a9-3eb7424e-cb59-42a8-bac5-da225afb4111a0cf3c1f-690d-4e51-8871-c03247bb1c8a", "type": "custom", "source": "b0592176-2a34-410c-8145-a0a7176330f1", "target": "3eb7424e-cb59-42a8-bac5-da225afb4111", "sourceHandle": "c8b3cbc3-c69b-42c5-b47f-120991cba8a9", "targetHandle": "a0cf3c1f-690d-4e51-8871-c03247bb1c8a", "data": {"hovering": false}, "label": "", "sourceX": 5467.615722371556, "sourceY": -72.04216666426407, "targetX": 5234.615722371556, "targetY": 347.0931079997764, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-start00000000000000000000start00000000000000000000-7a07b4b0-0a5b-45a5-8f86-831e1625ef2aae8658a8-1427-4258-9d34-b63ede630a0e", "type": "custom", "source": "start00000000000000000000", "target": "7a07b4b0-0a5b-45a5-8f86-831e1625ef2a", "sourceHandle": "start00000000000000000000", "targetHandle": "ae8658a8-1427-4258-9d34-b63ede630a0e", "data": {}, "label": "", "sourceX": -155.2294630329306, "sourceY": 283.9115875421261, "targetX": -6.035595751128483, "targetY": 335.04516602996944, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-14bc32cc-81ff-4706-bcc6-abbf852b536503b82b66-c59f-41d4-a300-be629ba2713d-ec3568ae-82b2-472d-9f1e-d83650a401bfed66ef82-975e-4888-88f1-f7c165b50f4a", "type": "custom", "source": "14bc32cc-81ff-4706-bcc6-abbf852b5365", "target": "ec3568ae-82b2-472d-9f1e-d83650a401bf", "sourceHandle": "03b82b66-c59f-41d4-a300-be629ba2713d", "targetHandle": "ed66ef82-975e-4888-88f1-f7c165b50f4a", "data": {"hovering": false}, "label": "", "sourceX": 4588.25914501094, "sourceY": -65.38310267399083, "targetX": 4828.2566049389, "targetY": -64.29013972982273, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-aa5b7099-72c0-46d5-8149-d0e13c015ad169c83c2e-d150-4e4d-a82b-7ca312953cea-6662ec9d-5bb2-4c26-810e-a1c344f2e47642d45884-803a-45f5-a657-c1bb67c528fa", "type": "custom", "source": "aa5b7099-72c0-46d5-8149-d0e13c015ad1", "target": "6662ec9d-5bb2-4c26-810e-a1c344f2e476", "sourceHandle": "69c83c2e-d150-4e4d-a82b-7ca312953cea", "targetHandle": "42d45884-803a-45f5-a657-c1bb67c528fa", "data": {}, "label": "", "sourceX": 4588.25914501094, "sourceY": 504.0516356291145, "targetX": 4721.447801819205, "targetY": 520.9072881098875, "zIndex": 0, "animated": false}, {"id": "vueflow__edge-ec3568ae-82b2-472d-9f1e-d83650a401bfe1b9f690-4c07-4d10-a061-94b6871e7afc-b0592176-2a34-410c-8145-a0a7176330f1c194aff6-d008-4f0c-9602-ca1e1a31193a", "type": "custom", "source": "ec3568ae-82b2-472d-9f1e-d83650a401bf", "target": "b0592176-2a34-410c-8145-a0a7176330f1", "sourceHandle": "e1b9f690-4c07-4d10-a061-94b6871e7afc", "targetHandle": "c194aff6-d008-4f0c-9602-ca1e1a31193a", "data": {"hovering": false}, "label": "", "sourceX": 5061.2566049389, "sourceY": -64.29013972982273, "targetX": 5234.615722371556, "targetY": -72.04216666426407, "zIndex": 0, "animated": false}], "buttons": [], "config": {"position": [0, 0], "zoom": 1, "viewport": {"x": 0, "y": 0, "zoom": 1}}, "type": 1, "lang": "en", "copy_count": 0, "is_official": false, "is_store": false, "tag_id": null, "release_version": "chatflow_20250514145209501675_017", "store_version": null, "release_time": null, "release_user": null, "release_language": "en", "entities": [], "variables": [{"variable_name": "all_info", "description": "all_info", "lang": "en"}, {"variable_name": "all_response", "description": "all_response", "lang": "en"}, {"variable_name": "response", "description": "response", "lang": "en"}, {"variable_name": "all_info_check", "description": "all_info_check", "lang": "en"}, {"variable_name": "verify_state", "description": "verify_state", "lang": "en"}, {"variable_name": "result", "description": "result", "lang": "en"}, {"variable_name": "user_info", "description": "user_info", "lang": "en"}, {"variable_name": "email_result", "description": "email_result", "lang": "en"}, {"variable_name": "send_text", "description": "send_text", "lang": "en"}, {"variable_name": "whatsapp_id", "description": "whatsapp_id", "lang": "en"}, {"variable_name": "user_email", "description": "user_email", "lang": "en"}, {"variable_name": "user_name", "description": "user_name", "lang": "en"}, {"variable_name": "state", "description": "state", "lang": "en"}, {"variable_name": "user_confirm", "description": "user_confirm", "lang": "en"}], "categories": [], "position": [0, 0], "zoom": 1, "viewport": {"x": 0, "y": 0, "zoom": 1}}